---
title: "LISP 5주차 - LISP의 Varibales & Side Effects"
excerpt: "LISP의 변수 지정, Side Effects, LET함수를 알아보자."
categories:
  - lectures
tags:
  - lisp
last_modified_at:
---

## LISP의 변수 지정, Side Effects, LET함수
LISP에서 지역변수, 전역변수, 상수를 지정하는 방법과 Side Effect, LET함수의 사용법을 알아보자.

---

## LISP의 전역, 지역변수 설정
지역변수는 함수 내에서만 영향을 미치는 변수이고, 전역변수는 함수에 국한되지 않고 전체 파일의 모든 시점에 영향을 미치는 변수이다. 이러한 변수 사용에 대하여 알아보자.

이전에 설명했던 바와 같이 변수를 지정하기 위해서는 Setf 함수를 사용한다. 하지만, 지역, 전역변수와 상수 설정시에는 다른 함수를 사용한다. 

전역변수, 지역변수, 상수는 설정할 때 변수값을 *로 묶어줘야 한다. 

1. **Defconstant**  
Defconstant는 상수를 설정하는 함수이다.

```lisp
(defconstant speedOfLight 299792500.0) ;;상수를 setf로 바꾸는 것은 안됨.
```

2. **Defvar**  
Defvar는 전역변수를 지정하는 함수이다.

```lisp
(defvar *TotalGlasses* 0)
```

3. **Defparameter**  
Defparameter은 전역변수를 지정하는 함수이다.

```lisp
(defparameter *MaxGlasses* 500)
```

---

## 지정한 전역변수, 상수값 바꾸기

1. **Defvar로 전역변수 값 바꾸기**
```lisp
(defvar *TotalGlasses* 0)
```

위 코드를 입력하여 전역변수 값을 지정했다.
이제 이 전역변수 값을 변경하기 위하여 다시 위의 코드를 프롬프트에 재입력해보자.

```lisp
(defvar *TotalGlasses* 300)
```

위 코드를 입력하여 TotalGlasses 값을 300으로 설정하면 값을 바꿀 수 없다는 warning이 뜬다.

```lisp
*TotalGlasses*
	= 10
```

전역변수를 출력해보면 totalglasses의 값은 여전히 10으로 고정되어 있고, 두 번째 선언으로 값이 바뀌지 않았음을 확인할 수 있다.  

2. **defparameter로 전역변수 값 바꾸기

```lisp
(defparameter *MaxGlasses* 500)
```

위 코드를 입력하여 전역변수 값을 지정했다.
이제 이 전역변수 값을 변경하기 위하여 다시 위의 코드를 프롬프트에 재입력해보자.

```lisp
(defparameter *MaxGlasses* 2000)
```
위 코드를 입력하여 MaxGlasses 값을 2000으로 설정하면 값을 바꿀 수 없다는 warning이 뜬다.

```lisp
(defparameter *MaxGlasses* 2000)
*MaxGlasses* 
	= 2000
```

하지만 값을 출력해보면 값이 변화되어 있는 것을 확인할 수 있다.  
즉, 똑같이 warning이 뜨는 것은 같지만, defvar은 값이 변하지 않는다는 점, defparameter은 값이 변한다는 점이 다르다.

---

## Side Effects

Side Effects란 값 자체를 되돌려주는 것 이외에 함수가 취하는 행동들을 말한다.  
함수는 우리에게 값을 되돌려준다. 이것이 함수가 하는 Main effect이다. 그리고 이 기능 외에 함수가 취하는 행동이 바로 Side effects이다.  

예를 들면 setf함수의 Main effect는 값을 되돌려주는 것이고, Side effects는 변수에 값이 담기는 것이다.  
defun함수의 Main effect는 그 함수 자체를 되돌려주는 것이고 Side effect가 함수를 지정하는 것이다. 

---


## LISP의 LET

지역 내에 함수에서 변수를 지정하는 방법은 setf가 있지만, setf 말고 let을 사용하는 것을 권장한다. (함수 내 지역변수 설정 시) 특히 초기값을 설정할 때 let이 권장된다. 

```lisp
(defun average (x y)
"Declaration of local variables using let"
    (let ((sum (+ x y)) ;;sum이라는 변수에 x y를 더한 값을 넣어라.
    (product (* x y))) ;;product라는 변수에 x y를 곱한 값을 넣어라. 그리고, 변수 지정이 끝나면 괄호를 닫아라. 
(list x y ‘average ‘is (/ sum 2.0) ‘and product))) ;;list 값으로 문장을 만들어 x y의 값과 평균값, 그리고 product값을 출력하라. 
```

---

## LISP의 LET*
LET함수는 실시간으로 one by one 변수와 변수값을 지정한다.

```lisp
(defun price-change (old new)
"Example of LET*"
(let* ((diff (- new old)) ;;new에서 old를 뺀 값을 변수 diff에 넣어라.
     (proportion (/ diff old)) ;;방금 지정한 diff값과 old값을 나눠 변수 proportion에 넣어라.
     (percentage (* proportion 100.0))) ;;방금 지정한 proportion값에 100을 곱하여 변수percentage에 넣어라.
(list ‘widgets ‘changed ‘by percentage ‘percent))) ;;list 값으로 문장을 만들어 percentage를 출력하라. 
```

만약 그냥 let함수를 쓰게 되면 입력받은 new와 old값을 이용해 변수를 생성하기 때문에 변수 diff를 지정했다고 하더라도 그 뒤에 diff값을 이용하여 proportion 변수를 지정하지는 못한다.  
하지만 LET*를 사용하게 되면 이러한 문제를 해결할 수 있다. 



