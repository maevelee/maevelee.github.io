---
title: "CS50 5주차 - 문자열 복사"
excerpt: "문자열 복사 방법을 알아보자."
categories:
  - TIL
tags:
  - CS50
last_modified_at: 2021-02-26T01:41:00-05:00
---

## 문자열 복사  
  

이전 게시글에서 문자열이 메모리에 저장되어 있는 방식에 대해 알아봤다. 이번에는 저장되어있는 문자열을 다른 곳에 복사하는 방법에 대해 알아보자. 

- - -
  
아래 코드를 통해 문자열 복사 방법을 알아보자.  

  
```c
#include <cs50.h>
#include <ctype.h>
#include <stdio.h>

int main(void)
{
    char *s = get_string("s: "); //사용자로부터 문자열을 입력받아 변수 s에 저장한다.
    
    char *t = s; //s 변수를 t 변수에 복사한다.

    t[0] = toupper(t[0]); //t 변수에 들어간 문자열의 첫번째 값을 대문자로 변환한다.

    printf("%s\n", s); //s 변수(원래 입력받은 문자열)을 출력한다.
    printf("$s\n", t); //t 변수(대문자로 변환한 문자열)을 출력한다.
}
```
위 프로그램을 실행하면 s는 emma, t는 Emma라는 결과가 나와야 한다.  
  
![](https://drive.google.com/uc?id=1qw28866ZRDz_CylUEYmwmL74q_peqFYO){: .align-center}

하지만 결과를 출력하면 위와 같이 s와 t가 전부 Emma로 출력된다.  
  

- - -
  

![](https://drive.google.com/uc?id=1_4mvp2jUb11S7A94LfR_8svGx7mxH-t-){: .align-center}  
  

프로그램이 마음대로 돌아가지 않아서 화날 수 있지만 침착하고 다시 생각해보자.  
  
저번 수업에서 우리는 변수에 문자열을 넣어 저장하면 문자열이 저장되는것이 아니라 문자열의 가장 첫번째 값에 해당하는 메모리 주소가 저장되는것이라고 배웠다.  

그리고, 문자열의 끝에 널 종단 문자라고 하는 문자가 저장되며, 컴퓨터는 이 널 종단 문자를 만날때까지 루프를 돌며 문자열을 출력한다고 배웠다. 

그러므로, 위 코드 속 변수 t는 s 변수에 저장된 **문자열의 가장 첫번째 값에 해당하는 메모리 주소를 저장한 것**이다. 문자열 자체를 저장한 것이 아니다!  


![](https://drive.google.com/uc?id=1uo451ZELJKagRRTNmA5MafINeTphYQR6){: .align-center}  

사진과 같이 컴퓨터는 t변수에 s 변수에 저장된 문자열의 맨 첫번째 값인 E의 메모리 주소를 저장한 것이 된다.  
따라서 t[0]의 값을 대문자로 바꿔달라는 코드는 s의 값을 대문자로 바꾸게 되며, 결국 t와 s를 출력하면 같은 값이 출력된다.  

- - -

문자열을 실제로 메모리상에서 복사하려면 **메모리 할당 함수**를 사용하면 된다.  

```c
#include <cs50.h>
#include <ctype.h>
#include <stdio.h>
#include <string.h>

int main(void)
{
    char *s = get_string("s: "); //사용자로부터 문자열을 입력받는다.
    char *t = malloc(strlen(s)+1); //malloc 함수를 이용해 사용자가 입력한 문자열 길이 + 1 만큼의 메모리를 변수 t에 할당한다. 

    for(int i = 0, n = strlen(s); i < n + 1; i++)
    {
        t[i] = s[i]; //for 루프로 s에 담긴 문자열을 t에 저장한다. 
    }

    t[0] = toupper(t[0]); //t의 맨 앞 문자를 대문자로 변경한다. 

    printf("%s\n",s); //s와 t를 각각 출력한다. 
    printf("%t\n",t);
}
```

![](https://drive.google.com/uc?id=1emzhGhW4kMmyUBkytYToPZ6S3f-HinPe){: .align-center} 

malloc 함수를 이용하여 코드를 작성하면 위와 같이 원하는 결과를 출력할 수 있다! 

