---
title: "LISP 3주차 - LISP의 자료구조"
excerpt: "LISP의 자료구조를 알아보자."
categories:
  - lectures
tags:
  - lisp
last_modified_at:
---

## LISP의 리스트 자료구조
Lisp은 본디 리스트를 처리하는 프로세서라고 할 수 있다.  
LISP의 리스트 자료구조 표현을 알아보자.

---

## LISP의 리스트 자료구조 표현
Lisp의 리스트 자료구조 내장함수로는 대표적으로 ***Cons, list, append*** 가 있다.
  
  
1. **Cons** (Create one new cons cell)

Cons는 construct의 약자이며, 두 개의 입력을 받는다.  
기존 list에 문자를 추가해주는 형태이다.

```lisp
(cons ‘rice ‘(and beans)) ;;’rice라는 심볼과 ‘(and beans)라는 리스트를 연결한다.
	= (RICE AND BEANS)

(cons ‘a ‘(b c d))
	= (a b c d)

(cons ‘(a) ‘(b c d)) ;;a를 리스트로 인식한다.
    = ((a) (b c d) ;;따라서 한 리스트에 a원소를 가진 리스트, b, c, d를 가진 리스트 형태로 저장된다.

(consp nil) 
	= nil ;;nil값은 cons cell이 아니다.
```
2. **List** (make new lists)

List는 각각의 문자를 하나의 리스트로 만든다. 추가되는 자료형은 여러 개여도 상관없으며(리스트와 숫자, 문자 같이 입력 가능), 입력 받는 길이 역시 제한이 없다.

```lisp
(list ‘rice ‘and ‘beans) ;;’rice, ‘and, ‘beans라는 세 심볼을 리스트로 만든다.
	= (RICE AND BEANS) 

(listp nil) ;;nil은 원소가 없는, 0의 리스트이다.
	= t
```

3. **Append** (append lists together)
  
Append는 리스트와 리스트를 연결해준다. Append는 첫 번째 원소가 반드시 리스트여야 한다.

```lisp
(append ‘(rice) ‘(and beans)) ;;’(rice)라는 리스트와 ‘(and beans)라는 리스트를 연결한다.
	= (RICE AND BEANS) 
```
---
## Lisp의 Cons cell

Cons cell은 Lisp의 대표적인 자료구조 표현이다. Cons는 두 값/포인터를 홀딩한 메모리 개체를 구성한다. 
  
예를 들어 ‘((brain surgeons) never (say oops))라는 세 개의 원소로 구성된 리스트가 있다고 가정하자. 이 리스트는 Cons cell에서 위와 같은 과정을 거치며 저장된다.  

![](https://drive.google.com/uc?id=1EL5RHALz2NgoXrka5mqh9HpzHMGkR-zJ){: .align-center}  

---

## Lisp의 내장 함수 CAR and CDR

CAR와 CDR는 Lisp에 제공되어진 가장 첫 번째 함수이다.  
**Car**는 저장된 리스트의 **가장 첫 번째 원소**를 가져오며, **CDR**은 저장된 리스트의 **가장 첫 번째 원소를 제외**하고 가져온다.  
이와 유사한 함수로는 first, second, third와 같이 첫 번째, 두 번째, 세 번째 원소를 가져오는 함수가 있다.

```lisp
(car ‘(a (b c) d))
	= a
(cdr ‘a (b c) d))
	= ((b c) d)
```

가장 일반적인 형태로 원소를 가져오는 함수로는 nth가 있다.  
Nth 뒤에 가져오고자 하는 원소의 자리를 입력하면 된다.

```lisp
(nth 0 ‘(a (b c) d)) ;;0번째 인덱스의 원소를 가져와라.
	= a
Ex) (nth 1 ‘(a (b c) d)) ;;1번째 인덱스의 원소를 가져와라.
	= (b c)
```
---

## Lisp의 Dotted List
Dotted List는 마지막 원소를 명시적으로 나타내는 리스트이다.  
Lisp의 cons cell 표기법은 포인터가 계속 자료를 포인팅하다가 마지막에 nil을 만나고 끝난다. 하지만, Dotted List를 사용하면 이 마지막에 있는 nil이 nil이 아닌 다른 것으로 변경된다.

```lisp
Ex) ‘(a b c . d)
	= (a b c . d)
Ex) ‘(a b c . nil)
	= (a b c)
Ex) ‘(a b c)
	= (a b c) *마지막 nil을 가지고 있기 때문에 위 코드와 결과가 동일하게 출력된다.
```

**+)** 위에서 list 자료형 중 하나로 append를 언급했는데, append는 첫 번째 원소가 반드시 list여야 한다고 했다.  
하지만 두 번째 원소는 list가 아닐 수도 있다. 그러나 추가하고자 하는 두 번째 원소가 list인지 아닌지에 따라 출력값은 달라진다.

```lisp
(append ‘(a b c) ‘(d))
	= (a b c d)
```
위 코드의 경우 (a b c)라는 list의 cons cell 포인터가 가리킬 새로운 list값을 본 경우이므로 (a b c d)로 결과가 출력된다.

```lisp
(append ‘(a b c) ‘d))
	= (a b c . d)
```

하지만 위 코드는 d가 리스트가 아니라 symbol이므로 cons cell은 이를 포인팅하지 않으며, cons cell의 마지막에 있는 nil값을 d로 변환시켜 dotted list 형태가 결과로 출력된다. 

